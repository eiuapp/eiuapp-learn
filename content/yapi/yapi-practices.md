
## 实践 ##
---
### 原则 ###
---

1. 前端是接口的主要发起者, 维护者
2. 后端, 测试与前端交互, 只认YAPI中的接口与测试用例
3. 接口, 有重大修改, 请**及时**通知相关人
4. 单个接口只完成单个功能
5. 尽可能不要在一个接口中, 返回不同的数据结构, 
6. 接口列表与测试集合要配合编写
6. 请先经过相关人员讨论后再编写情况 
    1. 返回不同的数据结构
    2. 参数表达困难
    3. 接口功能不清楚

### 接口列表 ###
---

下面只说一些注意点, 其它不明的問同事

#### 编辑接口 ####

###### 基本设置 ######

- 请使用英文而不是拼音
- 使用 JSON 交互
- 当编辑完 测试集合 后, 回到接口列表打 tag 

###### 请求函数 ######

- 中文名称: 操作 - 模块 - 子模块 - 功能名
- 英文名称: AddUserAccout
- 大驼峰法: 大写字母开头的驼峰

###### 请求参数 ######

- 小驼峰法: 小写字母开头的驼峰, 而不是下划线
- 单参数多值: ,号分隔. 如: users=a,b,c,d
- 如果是 不同参数值返回不同数据结构,请在 mock和测试集合 中分别加示例,并在备注中指出.
- 非 Get 请求均要使用 json 格式
- Post 请求, 编写时,请导入 JSON
- 是否为必需,写准确. 

如: 当传入 year 时, 与传入 stage , 返回不同结果时, 说明, 

- year 且 stage 不是必须的
- year 或 stage 是必须的

**不合理的做法**之一: 此时应该编写为, year 和 stage 都不是必须的, 同时, 在备注头部写上上面2句话, 以让他人理解清楚.

**合理做法: 这种情况, 应当写成2个独立的接口** 分别代表: 

1. 按年获取XXX 
1. 按考核阶段获取XXX 

###### 备注 ######

1. 写业务或业务逻辑相关的内容.
2. 特殊交待的部分.

如: 当一个 ADD 功能需要 影响其它 Get 功能时, 要明确指出.


#### 高级MOCK ####

- POST请求 要导入 JSON 
- 每一条 mock要在 测试集合 中分别加示例


### 测试集合 ###
---

写完接口列表后,请一定要写上对应位置的测试集合.

#### 导入接口 ####

把测试集合从接口列表中导入.

如果之前的接口列表中 接口名称 有修改, 等同于新增一个接口, 则测试集合要重新添加或导入, 同时, 测试集合中原测试用例, 请同时删除.

#### 选择测试用例环境 ####

请 正确使用 通用规则配置, 如 

1. 有时, 返回的 code = 0 才是前端想要的结果
2. 有时, 返回 httpCode = 200 才是前端想要的结果

#### 具体测试用例 ####

1. 记得点击 更新
2. 接口列表中的 高级 MOCK 中的每一个MOCK , 都要对应有一个 测试用例, 且要在MOCK环境中, 返回正确结果. 
3. 此时, 点击对应接口按键, 返回至接口列表中, 明示, 前端人员确认接口, 后端人员可开始开发.




### 接口确认 ###
---

#### tag ####

tag 全使用 A.B 模式

A :

- 0 前端编写版本
- 1 后端开发版本
- 2 线上版本

B :

- 0 编写出现问题, 需要修复 或 未编写
- 1 版本号1
- 11 版本号11

| Tags  | 人员       | 含义 |
|----------|---------------|-------|
| 0.0 | 后端    | 前端编写有问题, 一般是后端发现问题, 需要接口修复 |
| 0.1 | 前端     | 首次编写完成1版本 |
| 0.1, 1.1 | 前后    | 前端完成1版本, 后端开发环境完成1版本 |
| 0.2, 1.1 | 前后    | 前端完成2版本, 后端开发环境完成1版本 |
| 0.0, 1.1 | 前后    | 后端开发环境完成1版本, 发现 前端2版本编写有问题 |
| 0.2, 1.2 | 前后    | 前端完成2版本, 后端开发环境完成2版本 |
| 0.2, 1.2, 2.2 | 前后    | 前端完成2版本, 后端开发环境完成2版本, 线上环境完成2版本 |
| 0.2, 1.2, 2.1 | 前后    | 前端完成2版本, 后端开发环境完成2版本, 线上环境完成1版本 |

#### 状态 ####

状态: 

- 未完成
- 已完成

| 状态 | 人员       | 含义 |
|----------|---------------|-------|
| 未完成 |  前后 | 前端编写有问题 |
| 已完成 |  后端 | 线上完成, 且tag中A.B的所有数字B一致 |
